@using System.Globalization
@using TuDa.CIMS.Shared.Entities
<MudContainer MaxWidth="MaxWidth.Small" Class="d-flex flex-column bg-white rounded">
    <MudDataGrid Items="@SortedPurchases"
                 FixedHeader="@true"
                 SortMode="SortMode.None"
                 Hover="@true">
        <Columns>
            <PropertyColumn
                Property="@(p => p.CompletionDate.HasValue ? p.CompletionDate.Value.ToString("dd.MM.yyyy", CultureInfo.GetCultureInfo("de-DE")) : "")"
                Title="Datum"/>
            <PropertyColumn
                Property="@(p => p.TotalPrice.ToString("C", CultureInfo.GetCultureInfo("de-DE")))"
                Title="Preis"/>
            <TemplateColumn CellClass="d-flex justify-end">
                <CellTemplate>
                    <MudIconButton Size="@Size.Small"
                                   Icon="@Icons.Material.Outlined.Info"
                                   @onclick="@(NavigateToPurchase)"/>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
            <MudDataGridPager RowsPerPageString="Einkäufe pro Seite:"
                              T="Purchase"/>
        </PagerContent>
    </MudDataGrid>
    <WorkingGroupInvoiceButton></WorkingGroupInvoiceButton>
</MudContainer>
