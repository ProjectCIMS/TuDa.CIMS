@using System.Globalization
@using TuDa.CIMS.Shared.Dtos.Responses

<MudContainer MaxWidth="MaxWidth.Small" Class="d-flex flex-column bg-white rounded">
    <MudDataGrid Items="@SortedPurchases"
                 FixedHeader="@true"
                 SortMode="SortMode.None"
                 Hover="@true">
        <Columns>
            <PropertyColumn
                Property="@(p => FormatCompletionDate(p))"
                Title="Datum"
                CellStyleFunc="@(p => GetTextStyle(p))"/>
            <PropertyColumn
                Property="@(p => p.TotalPrice.ToString("C", CultureInfo.GetCultureInfo("de-DE")))"
                Title="Preis"
                CellStyleFunc="@(p => GetTextStyle(p))"/>
            <TemplateColumn CellClass="d-flex justify-end">
                <CellTemplate>
                    <MudIconButton Size="@Size.Small"
                                   Icon="@Icons.Material.Outlined.Info"
                                   OnClick="@(() => NavigateToPurchase(context.Item))"/>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
            <MudDataGridPager RowsPerPageString="Einkäufe pro Seite:"
                              PageSizeOptions="[ 5, 10, 20 ]"
                              T="PurchaseResponseDto"/>
        </PagerContent>
    </MudDataGrid>
    <WorkingGroupInvoiceButton></WorkingGroupInvoiceButton>
</MudContainer>
